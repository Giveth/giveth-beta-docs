(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{84:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var a=n(3),i=n(7),r=(n(0),n(98)),o={id:"paid-gas-calculation",title:"Paid Gas Calculation"},c={unversionedId:"paid-gas-calculation",id:"paid-gas-calculation",isDocsHomePage:!1,title:"Paid Gas Calculation",description:"Giveth pays for almost all the gas consumed to process payments in Mainnet network. It also provides reports on the amount of gas that has been paid for every user, trace and campaign in terms of the amount of consumed Ether and the price in USD. Below describes how these values are measured.",source:"@site/docs/doc5-paid-gas-calculation.md",slug:"/paid-gas-calculation",permalink:"/docs/paid-gas-calculation",editUrl:"https://github.com/giveth/giveth-beta-docs/edit/master/docs/doc5-paid-gas-calculation.md",version:"current",sidebar:"docsSidebar",previous:{title:"Linke Preview",permalink:"/docs/link-preview"},next:{title:"Delegation to Community Flow",permalink:"/docs/delegation-from-community-flow"}},s=[],l={rightToc:s};function d(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Giveth")," pays for almost all the gas consumed to process payments in ",Object(r.b)("inlineCode",{parentName:"p"},"Mainnet")," network. It also provides reports on the amount of gas that has been paid for every user, trace and campaign in terms of the amount of consumed ",Object(r.b)("inlineCode",{parentName:"p"},"Ether")," and the price in ",Object(r.b)("inlineCode",{parentName:"p"},"USD"),". Below describes how these values are measured."),Object(r.b)("p",null,"For every withdrawal, two ",Object(r.b)("inlineCode",{parentName:"p"},"Mainnet")," transactions are needed in order to move money to the user's wallet:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"When a user collects/disburses funds from a trace, the ",Object(r.b)("inlineCode",{parentName:"li"},"withdraw")," method is called on the trace smart contract in a foreign network (not ",Object(r.b)("inlineCode",{parentName:"li"},"Mainnet"),").By that action, tokens are burnt in the foreign network and related events are emitted. A node app (",Object(r.b)("inlineCode",{parentName:"li"},"Bridge"),"), that is watching for these events, relays the payment to home network (",Object(r.b)("inlineCode",{parentName:"li"},"Mainnet"),"), by calling the ",Object(r.b)("inlineCode",{parentName:"li"},"authorizePayment")," method on the ",Object(r.b)("inlineCode",{parentName:"li"},"GivethBridge")," smart contract with corresponding data. After that transaction is mined, the payment item(s) appear in  ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"http://bridge.beta.giveth.io"}),"Bridge Monitor"),". The ",Object(r.b)("inlineCode",{parentName:"li"},"authorizePayment")," transactions can be created only by an authorized key held by ",Object(r.b)("inlineCode",{parentName:"li"},"Bridge"),", and every instance of gas paid on these transactions is added to gas paid balance in the corresponding ",Object(r.b)("inlineCode",{parentName:"li"},"Recipient Address"),", ",Object(r.b)("inlineCode",{parentName:"li"},"Trace")," and ",Object(r.b)("inlineCode",{parentName:"li"},"Campaign"),". You can see a sample of the ",Object(r.b)("inlineCode",{parentName:"li"},"authorizePayment")," transaction ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://etherscan.io/tx/0x1617485ca189d3c3dd7ca699a59a74d4016ee6c1460c2005d0d44f884fced118"}),"here"),".")),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},"Once the payment is approved, the receivers are able to collect their funds from the ",Object(r.b)("inlineCode",{parentName:"li"},"GivethBridge")," contract. In this step anyone is able to make the ",Object(r.b)("inlineCode",{parentName:"li"},"disburseAuthorizedPayments")," call to the GivethBridge smart contract and pay the gas to transfer money from Giveth bridge account to trace's recipient wallet. If this is not done by an individual, the call is made by",Object(r.b)("inlineCode",{parentName:"li"},"Giveth")," after aggregating multiple payments into one transaction. An example can be found in ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://etherscan.io/tx/0x210ce079b215444ccf3a93e93cfe12eccbab7389ff3e82909b50e5e9cf0481a1"}),"this transaction")," created by ",Object(r.b)("inlineCode",{parentName:"li"},"Giveth")," where you can see the total gas paid (about ",Object(r.b)("inlineCode",{parentName:"li"},"$113"),"). Here there are seven payments aggregated (6 in DAI and one in ETH), so we conclude the Giveth paid about ",Object(r.b)("inlineCode",{parentName:"li"},"$16")," per payment at this step. In the gas paid history, ",Object(r.b)("inlineCode",{parentName:"li"},"$16")," is added per corresponding recipient, trace and campaign, and is saved in the ",Object(r.b)("inlineCode",{parentName:"li"},"gasPaidUsdValue")," field. In this case, one of the recipients (0x00d18ca9782bE1CaEF611017c2Fbc1a39779A57C) received two payments (0.02 ETH and 350 DAI) so their gas paid charge is added twice.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"How do we know if Giveth has paid gas for PaymentExecuted?")),Object(r.b)("p",null,"All the ",Object(r.b)("inlineCode",{parentName:"p"},"authorizedPayment")," transactions are made by Giveth and beneficiary recipient, trace and campaign are charged."),Object(r.b)("p",null,"The logic is different for ",Object(r.b)("inlineCode",{parentName:"p"},"disburseAuthorizedPayments")," transactions. If the transaction sender is one of Giveth's accounts(",Object(r.b)("inlineCode",{parentName:"p"},"0xDAa172456F5815256831aeE19C8A370a83522871"),", ",Object(r.b)("inlineCode",{parentName:"p"},"0x839395e20bbB182fa440d08F850E6c7A8f6F0780"),")\nwe know that Giveth has paid the gas. Otherwise, we assume that the user has paid it."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"How  is the USD value paid gas determined?")),Object(r.b)("p",null,"The USD value of paid gas is the product of ",Object(r.b)("inlineCode",{parentName:"p"},"Ether amount paid as gas")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Ethereum price at the transaction timestamp"),"."))}d.isMDXComponent=!0},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=i.a.createContext({}),d=function(e){var t=i.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=d(e.components);return i.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},m=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=d(n),m=a,u=p["".concat(o,".").concat(m)]||p[m]||b[m]||r;return n?i.a.createElement(u,c(c({ref:t},l),{},{components:n})):i.a.createElement(u,c({ref:t},l))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var l=2;l<r;l++)o[l]=n[l];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);